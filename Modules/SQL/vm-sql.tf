module "sqlaoa-2node-primary-vm-DC10ANS01TFCW" {
  for_each                                           = var.sqlaoa-2node-primary-vm-DC10ANS01TFCW
  source                                             = "app.terraform.io/Molina-Cloud/windows-virtualmachine-aoa-pure-disk/azurerm"
  version                                            = "1.0.0"     
  vm_name                                            = each.value.vm_name
  subscription_name                                  = var.subscription_name
  resource_group_location                            = data.azurerm_resource_group.rg.location
  resource_group_name                                = data.azurerm_resource_group.rg.name
  vm_workload                                        = each.value.vm_workload
  network_interface_ids                              = [module.sqlaoa-2node-primary-node-mgmt-nic-DC10ANS01TFCW.nic_id, module.sqlaoa-2node-primary-node-db-nic-DC10ANS01TFCW.nic_id, module.sqlaoa-2node-primary-node-iscsi-nic-DC10ANS01TFCW.nic_id]
  application_name                                   = var.application_name
  environment                                        = var.environment
  ritm_number                                        = each.value.ritm_number
  server                                             = each.value.server
  Tshirtsize                                         = each.value.Tshirtsize
  exceptionsize                                      = each.value.exceptionsize
  admin_username                                     = data.azurerm_key_vault_secret.admin_username.value
  admin_password                                     = data.azurerm_key_vault_secret.admin_password_secret.value
  availability_set_id                                = module.sqlaoa-2node-sc-avset-DC10ANS01TFCW.availability_set_id
  image_def_name                                     = each.value.image_def_name
  server_type                                        = each.value.server_type
  os_disk_storage_type                               = each.value.os_disk_storage_type
  os_disk_size                                       = each.value.os_disk_size
  storage_account_boot_diagnostics                   = data.azurerm_storage_account.storage_account.primary_blob_endpoint
  domain_join_password                               = data.azurerm_key_vault_secret.domain_join_password_secret.value
  dataDiskArray                                      = each.value.dataDiskArray
  diskdetails                                        = each.value.diskdetails
  additional_tags                                    = each.value.additional_tags
  delphixconnector                                   = each.value.delphixconnector
  Patching_window                                    = each.value.Patching_window
  sql_year                                           = each.value.sql_year                 
  sql_Edition                                        = each.value.sql_Edition
  cluster_name                                       = each.value.cluster_name 
  cluster_ip                                         = module.sqlaoa-2node-sc-loadbalancer-DC10ANS01TFCW.custer_frontend_ip
  listener_name                                      = each.value.listener_name
  listener_ip                                        = module.sqlaoa-2node-sc-loadbalancer-DC10ANS01TFCW.listener_frontend_ip
  vm_management_ip                                   = module.sqlaoa-2node-primary-node-mgmt-nic-DC10ANS01TFCW.nic_ip
  vm_database_ip                                     = module.sqlaoa-2node-primary-node-db-nic-DC10ANS01TFCW.nic_ip
  node_count                                         = each.value.node_count
  node_type                                          = each.value.node_type 
  ag_name                                            = each.value.ag_name
  quorum_sa_name                                     = each.value.quorum_sa_name
  quorum_sa_rg_name                                  = each.value.quorum_sa_rg_name
  ip_iscsi                                           = module.sqlaoa-2node-primary-node-iscsi-nic-DC10ANS01TFCW.nic_ip 
  ansible_bearer_token                               = data.azurerm_key_vault_secret.ansible_bearer_token.value
  trigger_ansible                                    = each.value.trigger_ansible

  depends_on = [module.sqlaoa-2node-sc-loadbalancer-DC10ANS01TFCW]

}
